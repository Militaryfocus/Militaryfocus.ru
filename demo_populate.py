#!/usr/bin/env python3
"""
–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—è –±–ª–æ–≥–∞ –ò–ò –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
–°–æ–∑–¥–∞–µ—Ç —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç, –Ω–µ–æ—Ç–ª–∏—á–∏–º—ã–π –æ—Ç —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–≥–æ
"""

import os
import sys
import time
from datetime import datetime

# –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤ –ø—É—Ç—å
sys.path.insert(0, os.path.dirname(os.path.abspath(__file__)))

from blog import create_app, db
from blog.ai_content import populate_blog_with_ai_content, ContentScheduler
from blog.models import Category, User

def create_demo_data():
    """–°–æ–∑–¥–∞–Ω–∏–µ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö"""
    print("üé¨ –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø –ò–ò –ë–õ–û–ì–ê")
    print("="*50)
    
    app = create_app()
    with app.app_context():
        # –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—ã
        db.create_all()
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
        admin = User.query.filter_by(username='admin').first()
        if not admin:
            admin = User(
                username='admin',
                email='admin@blog.com',
                is_admin=True
            )
            admin.set_password('admin123')
            db.session.add(admin)
            db.session.commit()
            print("üë§ –°–æ–∑–¥–∞–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä: admin / admin123")
        
        # –°–æ–∑–¥–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        categories_data = [
            {'name': '—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏', 'description': '–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –∏–Ω–Ω–æ–≤–∞—Ü–∏–∏', 'color': '#007bff'},
            {'name': '–Ω–∞—É–∫–∞', 'description': '–ù–∞—É—á–Ω—ã–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è', 'color': '#28a745'},
            {'name': '–æ–±—â–µ—Å—Ç–≤–æ', 'description': '–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –∫—É–ª—å—Ç—É—Ä–∞', 'color': '#ffc107'},
            {'name': '–±–∏–∑–Ω–µ—Å', 'description': '–ü—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å—Å—Ç–≤–æ –∏ —ç–∫–æ–Ω–æ–º–∏–∫–∞', 'color': '#dc3545'},
            {'name': '–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ', 'description': '–û–±—É—á–µ–Ω–∏–µ –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ', 'color': '#17a2b8'},
        ]
        
        created_categories = 0
        for cat_data in categories_data:
            existing = Category.query.filter_by(name=cat_data['name']).first()
            if not existing:
                category = Category(**cat_data)
                db.session.add(category)
                created_categories += 1
        
        db.session.commit()
        print(f"üìÇ –°–æ–∑–¥–∞–Ω–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π: {created_categories}")
        
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ò–ò –∫–æ–Ω—Ç–µ–Ω—Ç
        print("\nü§ñ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ò–ò –∫–æ–Ω—Ç–µ–Ω—Ç–∞...")
        print("üìù –°–æ–∑–¥–∞–µ–º –ø–æ—Å—Ç—ã —Å –ø–æ–º–æ—â—å—é –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞...")
        
        # –°–æ–∑–¥–∞–µ–º 15 –ø–æ—Å—Ç–æ–≤ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
        success_count = populate_blog_with_ai_content(15)
        
        print(f"\n‚úÖ –°–æ–∑–¥–∞–Ω–æ {success_count} –ø–æ—Å—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é –ò–ò")
        print("\nüéØ –û–°–û–ë–ï–ù–ù–û–°–¢–ò –ò–ò –ö–û–ù–¢–ï–ù–¢–ê:")
        print("  ‚Ä¢ –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ")
        print("  ‚Ä¢ –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–π —Å—Ç–∏–ª—å")
        print("  ‚Ä¢ –†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ —Ç–µ–º—ã –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏")
        print("  ‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ–≥–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏—è")
        print("  ‚Ä¢ –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏")
        print("  ‚Ä¢ Markdown —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ")
        
        print("\nüöÄ –ì–û–¢–û–í–û! –ë–ª–æ–≥ –Ω–∞–ø–æ–ª–Ω–µ–Ω –ò–ò –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º")
        print("üåê –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: python app.py")
        print("üîó –û—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:5000")
        print("üë§ –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ admin / admin123")
        print("ü§ñ –ò–ò –ø–∞–Ω–µ–ª—å: http://localhost:5000/ai/ai-dashboard")

def show_ai_features():
    """–ü–æ–∫–∞–∑–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ò–ò —Å–∏—Å—Ç–µ–º—ã"""
    print("\n" + "="*60)
    print("ü§ñ –í–û–ó–ú–û–ñ–ù–û–°–¢–ò –ò–ò –°–ò–°–¢–ï–ú–´")
    print("="*60)
    
    features = [
        "üìù –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–æ–≤",
        "üéØ –†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ —Ç–µ–º—ã –∏ —Å—Ç–∏–ª–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏—è", 
        "üí¨ –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ—Ç –ò–ò –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",
        "üìÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏",
        "‚≠ê –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞",
        "üè∑Ô∏è  –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–≥–æ–≤",
        "üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ò–ò –∫–æ–Ω—Ç–µ–Ω—Ç–∞",
        "üîß –ì–∏–±–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏",
        "üåê –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenAI API",
        "üé® Markdown —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ",
        "üì± –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –ø–æ—Å—Ç–æ–≤",
        "üîç SEO-–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç"
    ]
    
    for feature in features:
        print(f"  {feature}")
    
    print("\nüí° –£–ù–ò–ö–ê–õ–¨–ù–û–°–¢–¨:")
    print("  ‚Ä¢ –ö–æ–Ω—Ç–µ–Ω—Ç –Ω–µ–æ—Ç–ª–∏—á–∏–º –æ—Ç —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–≥–æ")
    print("  ‚Ä¢ –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–∏–∞–ª–æ–≥–∏ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö")
    print("  ‚Ä¢ –†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ —Å—Ç–∏–ª–µ–π –∏ —Ç–µ–º")
    print("  ‚Ä¢ –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∏ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å")
    
    print("="*60)

if __name__ == '__main__':
    print("üé≠ –°–æ–∑–¥–∞–Ω–∏–µ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –±–ª–æ–≥–∞ —Å –ò–ò –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º...")
    print("‚ö° –≠—Ç–æ –∑–∞–π–º–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç...")
    
    start_time = time.time()
    
    try:
        create_demo_data()
        show_ai_features()
        
        end_time = time.time()
        print(f"\n‚è±Ô∏è  –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: {end_time - start_time:.1f} —Å–µ–∫—É–Ω–¥")
        
    except Exception as e:
        print(f"\n‚ùå –û—à–∏–±–∫–∞: {e}")
        print("üí° –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:")
        print("   pip install -r requirements.txt")
        sys.exit(1)