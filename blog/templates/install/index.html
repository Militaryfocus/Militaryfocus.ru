{% extends "install/base.html" %}

{% block title %}Проверка требований - Установка{% endblock %}

{% block content %}
<h2 class="mb-4"><i class="fas fa-clipboard-check"></i> Проверка системных требований</h2>

<div class="requirements-check mb-4">
    <div class="requirement-item {% if requirements.python_version %}success{% else %}error{% endif %}">
        <div>
            <strong>Python 3.8+</strong>
            <br>
            <small>Текущая версия: {{ sys.version.split()[0] if sys else 'Неизвестно' }}</small>
        </div>
        <div>
            {% if requirements.python_version %}
                <i class="fas fa-check-circle fa-2x"></i>
            {% else %}
                <i class="fas fa-times-circle fa-2x"></i>
            {% endif %}
        </div>
    </div>
    
    <div class="requirement-item {% if requirements.pip %}success{% else %}error{% endif %}">
        <div>
            <strong>pip (менеджер пакетов)</strong>
            <br>
            <small>Для установки зависимостей</small>
        </div>
        <div>
            {% if requirements.pip %}
                <i class="fas fa-check-circle fa-2x"></i>
            {% else %}
                <i class="fas fa-times-circle fa-2x"></i>
            {% endif %}
        </div>
    </div>
    
    <div class="requirement-item {% if requirements.write_permission %}success{% else %}error{% endif %}">
        <div>
            <strong>Права на запись</strong>
            <br>
            <small>В текущую директорию</small>
        </div>
        <div>
            {% if requirements.write_permission %}
                <i class="fas fa-check-circle fa-2x"></i>
            {% else %}
                <i class="fas fa-times-circle fa-2x"></i>
            {% endif %}
        </div>
    </div>
    
    <div class="requirement-item {% if requirements.dependencies %}success{% else %}error{% endif %}">
        <div>
            <strong>Основные зависимости</strong>
            <br>
            <small>Flask, SQLAlchemy, Flask-Login</small>
        </div>
        <div>
            {% if requirements.dependencies %}
                <i class="fas fa-check-circle fa-2x"></i>
            {% else %}
                <i class="fas fa-times-circle fa-2x"></i>
            {% endif %}
        </div>
    </div>
</div>

{% if all_ok %}
    <div class="alert alert-success">
        <i class="fas fa-check-circle"></i> Все требования выполнены! Можно продолжить установку.
    </div>
    
    <div class="text-center mt-4">
        <a href="{{ url_for('step1') }}" class="btn btn-primary btn-lg">
            <i class="fas fa-arrow-right"></i> Начать установку
        </a>
    </div>
{% else %}
    <div class="alert alert-danger">
        <i class="fas fa-exclamation-triangle"></i> Некоторые требования не выполнены.
    </div>
    
    <div class="card mt-4">
        <div class="card-body">
            <h5 class="card-title">Как исправить:</h5>
            
            {% if not requirements.python_version %}
            <p><strong>Python 3.8+:</strong> Установите Python версии 3.8 или выше с официального сайта python.org</p>
            {% endif %}
            
            {% if not requirements.pip %}
            <p><strong>pip:</strong> Обычно устанавливается вместе с Python. Проверьте установку: <code>python -m ensurepip</code></p>
            {% endif %}
            
            {% if not requirements.write_permission %}
            <p><strong>Права на запись:</strong> Убедитесь, что у вас есть права на запись в текущую директорию</p>
            {% endif %}
            
            {% if not requirements.dependencies %}
            <p><strong>Зависимости:</strong> Установите зависимости командой: <code>pip install -r requirements.txt</code></p>
            {% endif %}
        </div>
    </div>
    
    <div class="text-center mt-4">
        <a href="{{ url_for('index') }}" class="btn btn-secondary">
            <i class="fas fa-sync"></i> Проверить снова
        </a>
    </div>
{% endif %}
{% endblock %}