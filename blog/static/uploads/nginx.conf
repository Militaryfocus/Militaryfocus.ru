# Конфигурация nginx для папки uploads

location /static/uploads/ {
    # Разрешаем только изображения
    location ~ \.(jpg|jpeg|png|gif|webp|svg|ico)$ {
        expires 30d;
        add_header Cache-Control "public, immutable";
    }
    
    # Блокируем все остальные файлы
    location ~ \.(php|py|exe|sh|bat|js|html|htm)$ {
        deny all;
    }
    
    # Заголовки безопасности
    add_header X-Content-Type-Options "nosniff";
    add_header X-Frame-Options "SAMEORIGIN";
    
    # Ограничение размера
    client_max_body_size 10M;
    
    # Отключаем выполнение скриптов
    location ~ \.php$ {
        return 403;
    }
}